<tool id="umiwhitelist" name="umiwhitelist">
	<description>Identify correct cell barcodes - more info : "umi_tools whitelist --help"</description>

	<command interpreter="docker," dockerimage="genomicpariscentre/umi-tools:0.5.3">bash -c "
		umi_tools whitelist
		--stdin ${inputr1}
		--bc-pattern=${bc_pattern}
		--plot-prefix=\$( basename ${output} .txt )
		--method=${method}
		--log2stderr > $output 2> ${output}.err"
	</command>

	<inputs>
		<param format="fastq" name="inputr1" type="data" label="Source file"/>

		<param name="bc_pattern"
			type="text"
			value="CCCCCCCCCCCCCCCCNNNNNNNNNNNN"
			label="Barcode pattern"
			help="Barcode pattern (identifies bases position)
			N = UMI position (required) ;
			C = cell barcode position (optional) ;
			X = sample position (optional)"/>

		<param name="method"
			type="select"
			label="Method to count number of feature per cell"
			help="Counts per cell barcode can be performed using either read or unique UMI counts.
			Usage: --method=[read|umis] to set the counting method.
			Default: umis">
			<option value="umis" selected="true">Count on UMIs</option>
			<option value="reads">Count on reads</option>
		</param>
	</inputs>

	<outputs>
		<data format="whitelist_txt" name="output"/>
	</outputs>
</tool>
